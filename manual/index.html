<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual | Jumbo Grove</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<link rel="stylesheet" href="./inject/css/0-app.css"><link rel="stylesheet" href="./inject/css/0-style.css"><script src="./inject/script/0-jumbogrove.js"></script><script src="./inject/script/0-script.js"></script><meta name="description" content="An interactive fiction game engine"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="Jumbo Grove"><meta property="twitter:description" content="An interactive fiction game engine"></head>
<body class="layout-container manual-root manual-index" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/irskep/jumbogrove"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/Readme.html"><a href="manual/Readme.html" data-ice="link">Jumbo Grove</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/Readme.html"><a href="manual/Readme.html#features" data-ice="link">Features</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/Readme.html"><a href="manual/Readme.html#quick-start" data-ice="link">Quick Start</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/Readme.html"><a href="manual/Readme.html#docs" data-ice="link">Docs</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/Readme.html"><a href="manual/Readme.html#-a-href--http---steveasleep-com-jumbogrove-manual-tutorial-basics-html--tutorial--a-" data-ice="link">Tutorial</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/Readme.html"><a href="manual/Readme.html#-a-href--http---steveasleep-com-jumbogrove-identifiers-html--api--a-" data-ice="link">API</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/Readme.html"><a href="manual/Readme.html#demo" data-ice="link">Demo</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/Readme.html"><a href="manual/Readme.html#demo-source-code" data-ice="link">Demo source code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/Readme.html"><a href="manual/Readme.html#-quot-jumbo-grove-quot--" data-ice="link">&quot;Jumbo Grove&quot;?</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/where_to_find_the_api.html"><a href="manual/where_to_find_the_api.html" data-ice="link">Where to find the API reference</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/tutorial_basics.html"><a href="manual/tutorial_basics.html" data-ice="link">The Basics</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_basics.html"><a href="manual/tutorial_basics.html#the-maze" data-ice="link">The Maze</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_basics.html"><a href="manual/tutorial_basics.html#introducing-situations" data-ice="link">Introducing situations</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_basics.html"><a href="manual/tutorial_basics.html#laying-out-the-maze" data-ice="link">Laying out the maze</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_basics.html"><a href="manual/tutorial_basics.html#introducing-tags" data-ice="link">Introducing Tags</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_basics.html"><a href="manual/tutorial_basics.html#maze-game-teleporter-pads" data-ice="link">Maze game teleporter pads</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/tutorial_scripting.html"><a href="manual/tutorial_scripting.html" data-ice="link">Scripting Choices</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_scripting.html"><a href="manual/tutorial_scripting.html#custom-option-text" data-ice="link">Custom option text</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_scripting.html"><a href="manual/tutorial_scripting.html#remembering-things" data-ice="link">Remembering things</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial_scripting.html"><a href="manual/tutorial_scripting.html#model-globalstate" data-ice="link">model.globalState</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial_scripting.html"><a href="manual/tutorial_scripting.html#tiny-maze-example" data-ice="link">Tiny maze example</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_scripting.html"><a href="manual/tutorial_scripting.html#priority" data-ice="link">Priority</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/tutorial_templates.html"><a href="manual/tutorial_templates.html" data-ice="link">Templates</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_templates.html"><a href="manual/tutorial_templates.html#world--39-s-simplest-puzzle" data-ice="link">World&apos;s Simplest Puzzle</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  <div class="manual-user-index" data-ice="manualUserIndex"><h1 id="jumbo-grove">Jumbo Grove</h1><p>Jumbo Grove is a tool for writing hypertext interactive fiction. <em>Hypertext</em>
means text with links. <em><a href="https://en.wikipedia.org/wiki/Interactive_fiction">Interactive fiction</a></em>
is a medium for storytelling that crosses over into video games.</p>
<h2 id="features">Features</h2><ul>
<li>Desktop, mobile, and gamepad support</li>
<li>Fully documented API</li>
<li>Packaged as a single JS file or as an NPM package</li>
<li>Many games require no &quot;coding&quot;</li>
</ul>
<h2 id="quick-start">Quick Start</h2><p>You can put up a fresh site with Jumbo Grove in less than 30 seconds by <a href="https://glitch.com/~jumbo-grove-demo">remixing this project on Glitch.</a> You can edit the game in a browser and it will live-update a real site!</p>
<h2 id="docs">Docs</h2><h3 id="-a-href--http---steveasleep-com-jumbogrove-manual-tutorial-basics-html--tutorial--a-"><a href="http://steveasleep.com/jumbogrove/manual/tutorial_basics.html">Tutorial</a></h3><h3 id="-a-href--http---steveasleep-com-jumbogrove-identifiers-html--api--a-"><a href="http://steveasleep.com/jumbogrove/identifiers.html">API</a></h3><h2 id="demo">Demo</h2><p>If you are on the <a href="http://steveasleep.com/jumbogrove/">Jumbo Grove documentation site</a>
(as opposed to reading the Readme on GitHub) then you will see a quick demo here:</p>
<p><div id="firstdemo" class="jg-headless"></div>

</p>
<h2 id="demo-source-code">Demo source code</h2><p>Here&apos;s the source code for the above demo:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#firstdemo&apos;, {
  id: &apos;demo&apos;,
  situations: [
    {
      id: &apos;start&apos;,
      content: `
      ### The Jumbo Grove Experience
      You are looking at a [web page](&gt;write:web_page).
      `,
      snippets: {
        web_page: `
        It is the documentation for Jumbo Grove. What do you want to do?

        * [Make a game](@make-a-game)
        * [Admire the beautiful CSS](@admire-css)
        `
      }
    },
    {
      id: &apos;make-a-game&apos;,
      content: `
      You type until your fingers are [sore](&gt;replaceself:sore_fingers).
      You make something incredible.
      `,
      snippets: {
        sore_fingers: &quot;sore (like, really sore)&quot;
      },
      choices: [&apos;admire-css&apos;],
    },
    {
      id: &apos;admire-css&apos;,
      optionText: &apos;Admire the CSS&apos;,
      content: `
      Your eyes trace the loving lines of the sidebar and the curves of the fonts.

      ### The End
      `
    },
  ]
});</code>
</code></pre>
<h2 id="-quot-jumbo-grove-quot--">&quot;Jumbo Grove&quot;?</h2><p>Interactive Fiction = IF<br>I + 1, F + 1 = J, G<br>J[umbo] G[rove]</p>
</div>

  

  <div class="manual-cards">
    
  <div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Jumbo Grove</h1><p>Jumbo Grove is a tool for writing hypertext interactive fiction. <em>Hypertext</em>
means text with links. <em><a href="https://en.wikipedia.org/wiki/Interactive_fiction">Interactive fiction</a></em>
is a medium for storytelling that crosses over into video games.</p><h2>Features</h2><ul>
<li>Desktop, mobile, and gamepad support</li>
<li>Fully documented API</li>
<li>Packaged as a single JS file or as an NPM package</li>
<li>Many games require no &quot;coding&quot;</li>
</ul><h2>Quick Start</h2><p>You can put up a fresh site with Jumbo Grove in less than 30 seconds by <a href="https://glitch.com/~jumbo-grove-demo">remixing this project on Glitch.</a> You can edit the game in a browser and it will live-update a real site!</p><h2>Docs</h2><h3><a href="http://steveasleep.com/jumbogrove/manual/tutorial_basics.html">Tutorial</a></h3><h3><a href="http://steveasleep.com/jumbogrove/identifiers.html">API</a></h3><h2>Demo</h2><p>If you are on the <a href="http://steveasleep.com/jumbogrove/">Jumbo Grove documentation site</a>
(as opposed to reading the Readme on GitHub) then you will see a quick demo here:</p><p><div id="firstdemo" class="jg-headless"></div>

</p><h2>Demo source code</h2><p>Here&apos;s the source code for the above demo:</p><pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#firstdemo&apos;, {
  id: &apos;demo&apos;,
  situations: [
    {
      id: &apos;start&apos;,
      content: `
      ### The Jumbo Grove Experience
      You are looking at a [web page](&gt;write:web_page).
      `,
      snippets: {
        web_page: `
        It is the documentation for Jumbo Grove. What do you want to do?

        * [Make a game](@make-a-game)
        * [Admire the beautiful CSS](@admire-css)
        `
      }
    },
    {
      id: &apos;make-a-game&apos;,
      content: `
      You type until your fingers are [sore](&gt;replaceself:sore_fingers).
      You make something incredible.
      `,
      snippets: {
        sore_fingers: &quot;sore (like, really sore)&quot;
      },
      choices: [&apos;admire-css&apos;],
    },
    {
      id: &apos;admire-css&apos;,
      optionText: &apos;Admire the CSS&apos;,
      content: `
      Your eyes trace the loving lines of the sidebar and the curves of the fonts.

      ### The End
      `
    },
  ]
});</code>
</code></pre><h2>&quot;Jumbo Grove&quot;?</h2><p>Interactive Fiction = IF<br>I + 1, F + 1 = J, G<br>J[umbo] G[rove]</p></div>
        <a data-ice="link" href="manual/Readme.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Where to find the API reference</h1><p><a href="./manual/../identifiers.html">Here is the API reference.</a>
It has details about situations, models, qualities, and more.</p></div>
        <a data-ice="link" href="manual/where_to_find_the_api.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>The Basics</h1><p>In this guide:</p><ul>
<li>Situations: what are they?</li>
<li>Tags</li>
<li>Writing text</li>
<li>Presenting choices</li>
</ul><h2>The Maze</h2><p>For our first game, we will create a simple maze for the player to
solve. <strong>You won&apos;t need to write any JavaScript functions for this section.</strong></p><p>To help us keep things straight, here&apos;s a map of the maze
we&apos;ll create:</p><pre><code><code class="source-code prettyprint">in +-+-+-+-+
 --&gt; |   | |
   + + + + +
   |   |   |
   + +-+ +-+
   |   |   |
   +-+ + + +
   |   | | --&gt; out
   +-+-+-+-+</code>
</code></pre><p>All content is written in HTML and
<a href="https://daringfireball.net/projects/markdown/syntax">Markdown</a>.
You should read up on Markdown before continuing.
<a href="http://markdownlivepreview.com/">Try it live in your browser here.</a></p><h2>Introducing situations</h2><p>A Jumbo Grove game is made of <strong>situations</strong>. You can also think of
them as &quot;rooms,&quot; but we use the word &quot;situation&quot; because all they are
is some hypertext shown to the player, and a decision to be made
(which link to click).</p><p>The bare minimum for a Jumbo Grove game is an <code>id</code> that uniquely identifies
your game, and at least one situation:</p><pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;maze-game-2000&apos;,
  situations: [
    {
      id: &apos;start&apos;,  // the situation with id=start is how the game begins
      content: `
        You are standing at the entrance of a maze.
      ` // &lt;- backticks let you write multi-line strings.
        //    You can indent multi-line strings as much as you want.
        //    Jumbo Grove will remove the extra spaces.
    }
  ]
});</code>
</code></pre><p>If you&apos;re not an experienced JavaScript programmer, you might be doing
a lot of copying and pasting. That&apos;s OK! You might need to
<a href="https://github.com/irskep/jumbogrove/issues/new">ask a lot of questions.</a>
That&apos;s also OK!</p><p>In fact, here is an <strong>officially sanctioned copy-paste template for situations:</strong></p><pre><code class="lang-js"><code class="source-code prettyprint">{
  id: &apos;REPLACE THIS&apos;,
  tags: [],  // like [&apos;maze-room&apos;, &apos;castle&apos;]
  autosave: false,
  displayOrder: 0,  // determines placement in choices list (higher = farther down)
  optionText: &apos;Go to the copy-pasted situation&apos;,
  content: `
    # Title, if you want

    Some more text

    [Append some text](&gt;write:text_to_append)

    [Replace this with some text](&gt;replaceself:text_to_replace)

    [Go to another situation](@some-situation-id)

    [Perform an action](&gt;some_action)
  `,
  snippets: {
    text_to_append: &quot;Here is some more text.&quot;,
    text_to_replace: &quot;I&apos;m a little teapot&quot;
  },
  choices: [&apos;#maze-room&apos;, &apos;some-situation-id&apos;],
  actions: {
    some_action: function(model, ui, action) {
      console.log(&quot;You did a&quot;, action);
    }
  }
}</code>
</code></pre><p>It doesn&apos;t include absolutely everything, but it does have the most common fields.</p><h2>Laying out the maze</h2><p>Let&apos;s assign letters to each square in the maze:</p><pre><code><code class="source-code prettyprint">   +-+-+-+-+
-&gt;  A|B C|D|
   + + + + +
   |E F|G H|
   + +-+ +-+
   |I J|K L|
   +-+ + + +
   |M N|O|P -&gt;
   +-+-+-+-+</code>
</code></pre><p>Looking at the upper left, you can see that the entrance of the maze leads to
situation A.</p><p>There are two ways to write that out. Here&apos;s Option 1:</p><pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;maze-game&apos;,
  situations: [
    {
      id: &apos;start&apos;,  // the situation with id=start is how the game begins
      content: `
        You are standing at the entrance of a maze.

        [Enter the maze](@A)
      `
    },
    {id: &apos;A&apos;, content: &quot;You are standing in cell A.&quot;, optionText: &quot;Enter the maze&quot;}
  ]
});</code>
</code></pre><p><strong>When you write a Markdown link whose target starts with <code>@</code>, it links
to the situation with that ID</strong> instead of behaving like a normal HTML link.
<code>[Enter the maze](@A)</code> creates a link that moves the player to situation <code>&apos;A&apos;</code>.</p><p>Here&apos;s Option 2:</p><pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;maze-game&apos;,
  situations: [
    {
      id: &apos;start&apos;,  // the situation with id=start is how the game begins
      content: `
        You are standing at the entrance of a maze.
      `,
      choices: [&apos;A&apos;]
    },
    {id: &apos;A&apos;, content: &quot;You are standing in cell A.&quot;, optionText: &quot;Enter the maze&quot;}
  ]
});</code>
</code></pre><p>Instead of writing out the link in our <code>content</code> string, we provide a list of
IDs that are OK to go to next, and the situation itself says what the
choice text should say.</p><p>Here&apos;s the maze game so far, running right in this page:</p><p><div id="maze-1" class="jg-headless"></div>

</p><p>Here&apos;s the whole maze wired up the same way. The solution is <code>AEFBCGKLP</code>.</p><p><div id="maze-2" class="jg-headless"></div>

</p><pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;maze-game&apos;,
  situations: [
    {
      id: &apos;start&apos;,  // the situation with id=start is how the game begins
      content: `
        You are standing at the entrance of a maze.
      `,
      choices: [&apos;A&apos;]
    },
    { id: &apos;A&apos;, optionText: &quot;Enter the maze&quot;,
      content: &quot;You are standing in cell A.&quot;,
      choices: [&apos;E&apos;] },
    { id: &apos;B&apos;, optionText: &quot;Go to B&quot;, content: &quot;You are standing in cell B.&quot;,
      choices: [&apos;F&apos;, &apos;C&apos;]},
    { id: &apos;C&apos;, optionText: &quot;Go to C&quot;, content: &quot;You are standing in cell C.&quot;,
      choices: [&apos;B&apos;, &apos;G&apos;]},
    { id: &apos;D&apos;, optionText: &quot;Go to D&quot;, content: &quot;You are standing in cell D.&quot;,
      choices: [&apos;H&apos;]},
    { id: &apos;E&apos;, optionText: &quot;Go to E&quot;, content: &quot;You are standing in cell E.&quot;,
      choices: [&apos;A&apos;, &apos;I&apos;, &apos;F&apos;]},
    { id: &apos;F&apos;, optionText: &quot;Go to F&quot;, content: &quot;You are standing in cell F.&quot;,
      choices: [&apos;E&apos;, &apos;B&apos;]},
    { id: &apos;G&apos;, optionText: &quot;Go to G&quot;, content: &quot;You are standing in cell G.&quot;,
      choices: [&apos;C&apos;, &apos;K&apos;, &apos;H&apos;]},
    { id: &apos;H&apos;, optionText: &quot;Go to H&quot;, content: &quot;You are standing in cell H.&quot;,
      choices: [&apos;G&apos;, &apos;D&apos;]},
    { id: &apos;I&apos;, optionText: &quot;Go to I&quot;, content: &quot;You are standing in cell I.&quot;,
      choices: [&apos;E&apos;, &apos;J&apos;]},
    { id: &apos;J&apos;, optionText: &quot;Go to J&quot;, content: &quot;You are standing in cell J.&quot;,
      choices: [&apos;I&apos;, &apos;N&apos;]},
    { id: &apos;K&apos;, optionText: &quot;Go to K&quot;, content: &quot;You are standing in cell K.&quot;,
      choices: [&apos;G&apos;, &apos;O&apos;, &apos;L&apos;]},
    { id: &apos;L&apos;, optionText: &quot;Go to L&quot;, content: &quot;You are standing in cell L.&quot;,
      choices: [&apos;K&apos;, &apos;P&apos;]},
    { id: &apos;M&apos;, optionText: &quot;Go to M&quot;, content: &quot;You are standing in cell M.&quot;,
      choices: [&apos;N&apos;]},
    { id: &apos;N&apos;, optionText: &quot;Go to N&quot;, content: &quot;You are standing in cell N.&quot;,
      choices: [&apos;M&apos;, &apos;J&apos;]},
    { id: &apos;O&apos;, optionText: &quot;Go to O&quot;, content: &quot;You are standing in cell O.&quot;,
      choices: [&apos;K&apos;]},
    { id: &apos;P&apos;, optionText: &quot;Go to P&quot;, content: &quot;You are standing in cell P.&quot;,
      choices: [&apos;L&apos;, &apos;win&apos;]},
    {
      id: &apos;win&apos;,
      optionText: &apos;Exit the maze&apos;,
      content: `
        You exit the maze victorious!
      `
    }
  ]
});</code>
</code></pre><h2>Introducing Tags</h2><p>When you specify some <code>choices</code> for your situation, you can include a
hashtag to refer to a <em>group</em> of situations.</p><p>In this case, the <code>living-room</code> situation would provide choices for
both the <code>bathroom</code> and <code>bedroom</code> situations:</p><pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;house-game&apos;,
  initialSituation: &apos;living-room&apos;,  // use this instead of &apos;start&apos; if you want
  situations: [
    {
      id: &apos;living-room&apos;,
      optionText: &apos;Go to the living room&apos;,
      content: &quot;The living room has a couch and a TV.&quot;,
      choices: [&apos;#from-living-room&apos;]
    },
    {
      id: &apos;bathroom&apos;,
      tags: [&apos;from-living-room&apos;],
      optionText: &quot;Enter the bathroom&quot;,
      displayOrder: 2,  // show up AFTER the bedroom in the choices list
      content: &quot;The bathroom contains a sink and a toilet.&quot;,
      choices: [&apos;living-room&apos;]
    },
    {
      id: &apos;bedroom&apos;,
      tags: [&apos;from-living-room&apos;],
      displayOrder: 1,  // show up BEFORE the bathroom in the choices list
      optionText: &quot;Enter the bedroom&quot;,
      content: &quot;The bedroom is filled by a queen sized bed and a dresser.&quot;,
      choices: [&apos;living-room&apos;]
    },
  ]
})</code>
</code></pre><h2>Maze game teleporter pads</h2><p>We can use this feature to add teleporter pads to a few cells of our maze.
Any teleporter room can send the user to any other teleporter room.
If we have lots of teleporters, we don&apos;t want to have to individually
connect them all!</p><p>The marked squares will contain teleporters:</p><pre><code><code class="source-code prettyprint">in +-+-+-+-+
-&gt;   |   |D|
   + + + + +
   |   |   |
   + +-+ +-+
   |   |  L|
   +-+ + + +
   |M  | |  -&gt; out
   +-+-+-+-+</code>
</code></pre><pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;maze-game&apos;,
  situations: [
    {
      id: &apos;start&apos;,  // the situation with id=start is how the game begins
      content: `
        You are standing at the entrance of a maze.
      `,
      choices: [&apos;A&apos;]
    },
    { id: &apos;A&apos;, optionText: &quot;Enter the maze&quot;,
      content: &quot;You are standing in cell A.&quot;,
      choices: [&apos;E&apos;] },
    { id: &apos;B&apos;, optionText: &quot;Go to B&quot;, content: &quot;You are standing in cell B.&quot;,
      choices: [&apos;F&apos;, &apos;C&apos;]},
    { id: &apos;C&apos;, optionText: &quot;Go to C&quot;, content: &quot;You are standing in cell C.&quot;,
      choices: [&apos;B&apos;, &apos;G&apos;]},
    {
      id: &apos;D&apos;,
      tags: [&apos;teleporter&apos;],
      optionText: &quot;Go to D&quot;,
      content: &quot;You are standing in cell D. There is a teleporter here.&quot;,
      choices: [&apos;H&apos;, &apos;#teleporter&apos;]
    },
    { id: &apos;E&apos;, optionText: &quot;Go to E&quot;, content: &quot;You are standing in cell E.&quot;,
      choices: [&apos;A&apos;, &apos;I&apos;, &apos;F&apos;]},
    { id: &apos;F&apos;, optionText: &quot;Go to F&quot;, content: &quot;You are standing in cell F.&quot;,
      choices: [&apos;E&apos;, &apos;B&apos;]},
    { id: &apos;G&apos;, optionText: &quot;Go to G&quot;, content: &quot;You are standing in cell G.&quot;,
      choices: [&apos;C&apos;, &apos;K&apos;, &apos;H&apos;]},
    { id: &apos;H&apos;, optionText: &quot;Go to H&quot;, content: &quot;You are standing in cell H.&quot;,
      choices: [&apos;G&apos;, &apos;D&apos;]},
    { id: &apos;I&apos;, optionText: &quot;Go to I&quot;, content: &quot;You are standing in cell I.&quot;,
      choices: [&apos;E&apos;, &apos;J&apos;]},
    { id: &apos;J&apos;, optionText: &quot;Go to J&quot;, content: &quot;You are standing in cell J.&quot;,
      choices: [&apos;I&apos;, &apos;N&apos;]},
    { id: &apos;K&apos;, optionText: &quot;Go to K&quot;, content: &quot;You are standing in cell K.&quot;,
      choices: [&apos;G&apos;, &apos;O&apos;, &apos;L&apos;]},
    {
      id: &apos;L&apos;,
      tags: [&apos;teleporter&apos;],
      optionText: &quot;Go to L&quot;,
      content: &quot;You are standing in cell L. There is a teleporter here.&quot;,
      choices: [&apos;K&apos;, &apos;P&apos;, &apos;#teleporter&apos;]
    },
    {
      id: &apos;M&apos;,
      tags: [&apos;teleporter&apos;],
      optionText: &quot;Go to M&quot;,
      content: &quot;You are standing in cell M. There is a teleporter here.&quot;,
      choices: [&apos;N&apos;, &apos;#teleporter&apos;]
    },
    { id: &apos;N&apos;, optionText: &quot;Go to N&quot;, content: &quot;You are standing in cell N.&quot;,
      choices: [&apos;M&apos;, &apos;J&apos;]},
    { id: &apos;O&apos;, optionText: &quot;Go to O&quot;, content: &quot;You are standing in cell O.&quot;,
      choices: [&apos;K&apos;]},
    { id: &apos;P&apos;, optionText: &quot;Go to P&quot;, content: &quot;You are standing in cell P.&quot;,
      choices: [&apos;L&apos;, &apos;win&apos;]},
    {
      id: &apos;win&apos;,
      optionText: &apos;Exit the maze&apos;,
      content: `
        You exit the maze victorious!
      `
    }
  ]
});</code>
</code></pre><p>The user can now take a more circuitous route to the exit:
<code>AEIJNMLKOP</code>. Here&apos;s the running code:</p><p><div id="maze-3" class="jg-headless"></div>

</p><p>That&apos;s most of what you can do without writing any JavaScript functions.</p></div>
        <a data-ice="link" href="manual/tutorial_basics.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Scripting Choices</h1><p>In this guide:</p><ul>
<li><code>situation.optionText</code> as a function (<code>function(model, host) -&gt; Bool</code>)</li>
<li><code>situation.getCanSee(model, host) -&gt; Bool</code></li>
<li><code>situation.getCanChoose(model, host) -&gt; Bool</code></li>
<li><code>situation.enter(model, ui, fromSituation)</code></li>
<li><code>situation.priority</code></li>
<li><code>model.globalState</code></li>
</ul><h2>Custom option text</h2><p><em>This section builds on the code from <a href="./manual/tutorial_basics.html">the previous section</a>.</em></p><p>You might have noticed that when you first &quot;Enter the maze&quot; and then
&quot;Go to E,&quot; one of the options is still &quot;Enter the maze,&quot; which takes you
back to Cell A.</p><p>We can fix this using a little bit of JavaScript. <code>situation.optionText</code> can be either
a string, or a function! (<a href="./manual/../class/src/jg/situation.js~Situation.html">You can see a reference for all the <code>situation</code> values
here</a>.)</p><p>It looks like this:</p><pre><code class="lang-js"><code class="source-code prettyprint">{
  id: &apos;my-situation&apos;,
  optionText: function(model, hostSituation) {
    return &apos;a string&apos;;
  }
}</code>
</code></pre><p>The <code>model</code> argument will be explained later. <code>hostSituation</code> is the
situation that is presenting the choice.</p><p>Here&apos;s how we can use that in our game.
(From here on out, when we&apos;re just modifying one situation, we&apos;ll just list out
the code for that situation, instead of the whole game.)</p><pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;maze-game&apos;,
  situations: [
    /* ... */
    { id: &apos;A&apos;,

      /* THIS IS THE IMPORTANT PART */
      optionText: function(model, hostSituation) {
        if (hostSituation.id === &apos;start&apos;) {
          return &apos;Enter the maze&apos;;
        } else {
          return &apos;Go to A&apos;;
        }
      },
      /* end important part */

      content: &quot;You are standing in cell A.&quot;,
      choices: [&apos;E&apos;] },
    /* ... */
  ]
})</code>
</code></pre><p>We can also add some spice to our teleporter cells. Instead of &quot;Go to X&quot;, they
can say &quot;Teleport to X&quot; if they are being presented as a choice from another
teleporter situation.</p><p>There is a method on situation objects,
<a href="./manual/../class/src/jg/situation.js~Situation.html#instance-method-hasTag"><code>Situation.hasTag()</code></a>,
that we can use to quickly determine if the &quot;host&quot; situation (the situation presenting
the choice) has a particular tag.</p><pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;maze-game&apos;,
  situations: [
    /* ... */
      {
        id: &apos;D&apos;,
        tags: [&apos;teleporter&apos;],
        optionText: function(model, host) {
          if (host.hasTag(&apos;teleporter&apos;)) {
            return &apos;Teleport to D&apos;;
          } else {
            return &apos;Go to D&apos;;
          }
        },
        content: &quot;You are standing in cell D. There is a teleporter here.&quot;,
        choices: [&apos;H&apos;, &apos;#teleporter&apos;]
      },
    /* ... */
      {
        id: &apos;L&apos;,
        tags: [&apos;teleporter&apos;],
        optionText: function(model, host) {
          if (host.hasTag(&apos;teleporter&apos;)) {
            return &apos;Teleport to L&apos;;
          } else {
            return &apos;Go to L&apos;;
          }
        },
        content: &quot;You are standing in cell L. There is a teleporter here.&quot;,
        choices: [&apos;K&apos;, &apos;P&apos;, &apos;#teleporter&apos;]
      },
      {
        id: &apos;M&apos;,
        tags: [&apos;teleporter&apos;],
        optionText: function(model, host) {
          if (host.hasTag(&apos;teleporter&apos;)) {
            return &apos;Teleport to M&apos;;
          } else {
            return &apos;Go to M&apos;;
          }
        },
        content: &quot;You are standing in cell M. There is a teleporter here.&quot;,
        choices: [&apos;N&apos;, &apos;#teleporter&apos;]
      },
    /* ... */
  ]
})</code>
</code></pre><p>If you&apos;re an experienced JavaScript programmer you might want to consolidate that
logic a bit. Go right ahead!</p><p>Here are the changes in action. You can walk to cell D by visiting cells
<code>AEFBCGHD</code>, where you can see the teleporter options.</p><p><div id="maze-4" class="jg-headless"></div>

</p><h2>Remembering things</h2><p>Let&apos;s design a new maze. It will be physically smaller, but it will require
the player to find a key to solve.</p><pre><code><code class="source-code prettyprint">+-------+-------+
|       |       |
|  key  | exit   
|       |       |
+-     -+- door-+
|       |       |
| start   empty |
|       |       |
+-------+-------+</code>
</code></pre><p>We want our logic to look something like this:</p><ul>
<li>When the player enters the &apos;key&apos; room,<ul>
<li>Then remember that the player has the key.</li>
<li>Once the player has the key, stop showing the &apos;key&apos; room.</li>
</ul>
</li>
<li>When the player enters the empty room,<ul>
<li>Only show the <code>door</code> choice if they have the key.</li>
</ul>
</li>
</ul><p>To accomplish this task, we need to use three new features of situations.
Each one is a function you can provide which is called by Jumbo Grove
when something happens or a decision needs to be made.</p><ul>
<li><code>situation.getCanSee(model, host)</code> may prevent the host situation from displaying
this situation as a choice by returning <code>false</code>.</li>
<li><code>situation.getCanChoose(model, host)</code> may let the player <em>see</em> a choice,
but not <em>take</em> it. This is so they know there is an option they haven&apos;t
yet unlocked.</li>
<li><code>situation.enter(model, ui, fromSituation)</code> is called when the player
enters a situation, <em>after</em> <code>content</code> has been shown.</li>
</ul><p>And finally, we need to make use of the <code>model</code>. The model object
<a href="./manual/../class/src/jg/model.js~model.html">does a lot of things.</a>
What we care about right now is the <code>model.globalState</code> object.</p><h3>model.globalState</h3><p>This object may contain anything you like, as long as it is safe too
convert it to JSON. <code>globalState</code> is part of your game&apos;s <em>save file</em>.</p><p>Things that can be converted to JSON include:</p><ul>
<li>Numbers</li>
<li>Strings (<code>&quot;hello&quot;</code>)</li>
<li>Booleans (<code>true</code>, <code>false</code>)</li>
<li>Lists or objects containing numbers, strings, or booleans</li>
</ul><p><em>Everything else</em> is unsafe to use.</p><h3>Tiny maze example</h3><p>Here&apos;s our tiny maze game in full:</p><pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;prison-escape&apos;,
  // You can specify the initial value of globalState like this
  globalState: {
    playerHasKey: false,
  },
  situations: [
    {
      id: &apos;start&apos;,
      optionText: &apos;Return to your bedroom&apos;,
      content: `
        You are standing in a cold, damp cell. A straw mattress lies in
        the corner.
      `,
      choices: [&apos;key-room&apos;, &apos;door-room&apos;],
    },

    {
      id: &apos;key-room&apos;,
      // In the ASCII map I drew this as a whole room, but the flavor
      // text just calls it a hole in the wall.
      optionText: &apos;Inspect hole in the wall&apos;,
      getCanSee: function(model, host) {
        // only visible if player doesn&apos;t already have the key
        return model.globalState.playerHasKey === false;
      },
      enter: function(model, ui, from) {
        model.globalState.playerHasKey = true;
      },
      content: `
        There is a key hidden in the hole!
      `,
      choices: [&apos;start&apos;]
    },

    {
      id: &apos;door-room&apos;,
      optionText: &apos;Walk to the other end of the room&apos;,
      content: `
        There is a locked door here.
      `,
      choices: [&apos;start&apos;, &apos;win-the-game&apos;]
    },

    {
      id: &apos;win-the-game&apos;,
      optionText: &apos;Unlock the door&apos;,
      getCanChoose: function(model, host) {
        // only pickable if player DOES have the key
        return model.globalState.playerHasKey === true;
      },
      content: `
        You walk out into the hallway. You&apos;re free!

        # Game Over
      `
    }

  ]
});</code>
</code></pre><p><div id="prison-escape" class="jg-headless"></div>

</p><h2>Priority</h2><p>Imagine you&apos;re making a game about a high school crush. The player is
at a party, and may talk to anyone. But when their crush walks in the
room, all they can do is stammer and stare.</p><p>We could write a <code>getCanSee</code> function for every person you talk to,
but it&apos;s much simpler to use <code>situation.priority</code>!</p><p>When a situation&apos;s choices have different priorities, it only shows
choices of situations <em>with the highest priority.</em></p><p>So if situations A, B, and C have <code>priority: 0</code>, but situations E and F
have <code>priority: 1</code>, then only E and F will be presented.</p><p>All situations have priority 0 by default.</p><p>Here&apos;s a small demonstration:</p><pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;party-crush&apos;,
  globalState: {
    turnsUntilCrushEnters: 2,
    hasTalkedToJeff: false,
    hasTalkedToXiao: false,
    hasTalkedToMegan: false,
    hasTalkedToMarta: false
  },
  situations: [
    {
      id: &apos;start&apos;,
      content: &quot;You have entered a pretty chill party.&quot;,
      choices: [&apos;#talk-to-someone&apos;],
    },

    {
      id: &apos;jeff&apos;, tags: [&apos;talk-to-someone&apos;],
      optionText: &quot;Talk to Jeff&quot;,
      getCanSee: function(model) { return !model.globalState.hasTalkedToJeff; },
      enter: function(model) {
        model.globalState.hasTalkedToJeff = true;
        model.globalState.turnsUntilCrushEnters -= 1;
      },
      content: &quot;You catch up with Jeff. He aced his math test.&quot;,
      choices: [&apos;#talk-to-someone&apos;]
    },

    {
      id: &apos;xiao&apos;, tags: [&apos;talk-to-someone&apos;],
      optionText: &quot;Talk to Xiao&quot;,
      getCanSee: function(model) { return !model.globalState.hasTalkedToXiao; },
      enter: function(model) {
        model.globalState.hasTalkedToXiao = true;
        model.globalState.turnsUntilCrushEnters -= 1;
      },
      content: &quot;You catch up with Xiao. He scored the winning goal at a football game.&quot;,
      choices: [&apos;#talk-to-someone&apos;]
    },

    {
      id: &apos;megan&apos;, tags: [&apos;talk-to-someone&apos;],
      optionText: &quot;Talk to Megan&quot;,
      getCanSee: function(model) { return !model.globalState.hasTalkedToMegan; },
      enter: function(model) {
        model.globalState.hasTalkedToMegan = true;
        model.globalState.turnsUntilCrushEnters -= 1;
      },
      content: &quot;You catch up with Megan. She tells you about a short story she wrote.&quot;,
      choices: [&apos;#talk-to-someone&apos;]
    },

    {
      id: &apos;marta&apos;, tags: [&apos;talk-to-someone&apos;],
      optionText: &quot;Talk to Marta&quot;,
      getCanSee: function(model) { return !model.globalState.hasTalkedToMarta; },
      enter: function(model) {
        model.globalState.hasTalkedToMarta = true;
        model.globalState.turnsUntilCrushEnters -= 1;
      },
      content: &quot;You catch up with Marta. She just beat her personal best deadlift.&quot;,
      choices: [&apos;#talk-to-someone&apos;]
    },

    {
      id: &apos;crush&apos;, tags: [&apos;talk-to-someone&apos;],
      optionText: &quot;Your crush is here&quot;,
      priority: 1,
      getCanSee: function(model) {
        return model.globalState.turnsUntilCrushEnters &lt;= 0;
      },
      content: `
      You see your crush enter the party. You immediately forget how to speak.
      You stammer uncontrollably, trying to excuse yourself while you escape
      out the back door.

      # The End
      `
    }

  ]
});</code>
</code></pre><p><div id="party-crush" class="jg-headless"></div></p></div>
        <a data-ice="link" href="manual/tutorial_scripting.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Templates</h1><p>A situation doesn&apos;t always have to have the same text every time the
player sees it. You can use
<a href="https://mozilla.github.io/nunjucks/templating.html">Nunjucks template syntax</a>
to do all kinds of cool stuff!</p><h2>World&apos;s Simplest Puzzle</h2><pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;simple-puzzle&apos;,
  globalState: { hasPulledLever: false },
  situations: [

    { id: &apos;start&apos;,
      optionText: &apos;OK&apos;,
      content: `
      You are standing in a room with a thick shag carpet and purple velvet walls.

      {% if hasPulledLever %}
      The north wall has opened up into a huge cavern.
      {% else %}
      There is a lever on the west wall.
      {% endif %}
      `,
      choices: [&apos;pull-lever&apos;]
    },

    { id: &apos;pull-lever&apos;,
      optionText: &apos;Pull the lever&apos;,
      getCanSee: function(model) { return !model.globalState.hasPulledLever; },
      enter: function(model) {
        model.globalState.hasPulledLever = true;
      },
      content: `
        You pull the lever. A rumbling sound starts beneath your feet.
      `,
      choices: [&apos;start&apos;]
    },

  ]
})</code>
</code></pre><p><div id="simple-puzzle" class="jg-headless"></div></p></div>
        <a data-ice="link" href="manual/tutorial_templates.html"></a>
      </div>
    </div>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.4)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
