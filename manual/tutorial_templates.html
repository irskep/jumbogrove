<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual | Jumbo Grove</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<link rel="stylesheet" href="./inject/css/0-app.css"><link rel="stylesheet" href="./inject/css/0-style.css"><script src="./inject/script/0-jumbogrove.js"></script><script src="./inject/script/0-script.js"></script><meta name="description" content="An interactive fiction game engine"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="Jumbo Grove"><meta property="twitter:description" content="An interactive fiction game engine"></head>
<body class="layout-container manual-root" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/irskep/jumbogrove"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/Readme.html"><a href="manual/Readme.html" data-ice="link">Jumbo Grove</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/Readme.html"><a href="manual/Readme.html#features" data-ice="link">Features</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/Readme.html"><a href="manual/Readme.html#quick-start" data-ice="link">Quick Start</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/Readme.html"><a href="manual/Readme.html#docs" data-ice="link">Docs</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/Readme.html"><a href="manual/Readme.html#-a-href--http---steveasleep-com-jumbogrove-manual-tutorial-basics-html--tutorial--a-" data-ice="link">Tutorial</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/Readme.html"><a href="manual/Readme.html#-a-href--http---steveasleep-com-jumbogrove-identifiers-html--api--a-" data-ice="link">API</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/Readme.html"><a href="manual/Readme.html#demo" data-ice="link">Demo</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/Readme.html"><a href="manual/Readme.html#demo-source-code" data-ice="link">Demo source code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/Readme.html"><a href="manual/Readme.html#-quot-jumbo-grove-quot--" data-ice="link">&quot;Jumbo Grove&quot;?</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/where_to_find_the_api.html"><a href="manual/where_to_find_the_api.html" data-ice="link">Where to find the API reference</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/tutorial_basics.html"><a href="manual/tutorial_basics.html" data-ice="link">The Basics</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_basics.html"><a href="manual/tutorial_basics.html#the-maze" data-ice="link">The Maze</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_basics.html"><a href="manual/tutorial_basics.html#introducing-situations" data-ice="link">Introducing situations</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_basics.html"><a href="manual/tutorial_basics.html#laying-out-the-maze" data-ice="link">Laying out the maze</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_basics.html"><a href="manual/tutorial_basics.html#introducing-tags" data-ice="link">Introducing Tags</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_basics.html"><a href="manual/tutorial_basics.html#maze-game-teleporter-pads" data-ice="link">Maze game teleporter pads</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/tutorial_scripting.html"><a href="manual/tutorial_scripting.html" data-ice="link">Scripting Choices</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_scripting.html"><a href="manual/tutorial_scripting.html#custom-option-text" data-ice="link">Custom option text</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_scripting.html"><a href="manual/tutorial_scripting.html#remembering-things" data-ice="link">Remembering things</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial_scripting.html"><a href="manual/tutorial_scripting.html#model-globalstate" data-ice="link">model.globalState</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial_scripting.html"><a href="manual/tutorial_scripting.html#tiny-maze-example" data-ice="link">Tiny maze example</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_scripting.html"><a href="manual/tutorial_scripting.html#priority" data-ice="link">Priority</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/tutorial_templates.html"><a href="manual/tutorial_templates.html" data-ice="link">Templates</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_templates.html"><a href="manual/tutorial_templates.html#world--39-s-simplest-puzzle" data-ice="link">World&apos;s Simplest Puzzle</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_templates.html"><a href="manual/tutorial_templates.html#template-context" data-ice="link">Template Context</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_templates.html"><a href="manual/tutorial_templates.html#custom-filters" data-ice="link">Custom Filters</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_templates.html"><a href="manual/tutorial_templates.html#with-markdown--amp--whitespace" data-ice="link">With Markdown &amp; Whitespace</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_templates.html"><a href="manual/tutorial_templates.html#adding-css" data-ice="link">Adding CSS</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_templates.html"><a href="manual/tutorial_templates.html#template-comment-syntax" data-ice="link">Template Comment Syntax</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial_templates.html"><a href="manual/tutorial_templates.html#changing-template-engines" data-ice="link">Changing Template Engines</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/tutorial_actions.html"><a href="manual/tutorial_actions.html" data-ice="link">Actions</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/tutorial_characters.html"><a href="manual/tutorial_characters.html" data-ice="link">Characters</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/tutorial_saving.html"><a href="manual/tutorial_saving.html" data-ice="link">Saving &amp; Loading</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown" data-ice="content"><h1 id="templates">Templates</h1><p>A situation doesn&apos;t always have to have the same text every time the
player sees it. You can use
<a href="https://mozilla.github.io/nunjucks/templating.html">Nunjucks template syntax</a>
to do all kinds of cool stuff!</p>
<p>The Nunjucks documentation is pretty good, so this part of the tutorial
won&apos;t really dive into the ins and outs of writing templates, but there
are a few interesting topics to cover:</p>
<ul>
<li>Basic usage</li>
<li>Template context: what variables are accessible in templates?</li>
<li>Custom filters</li>
<li>How Jumbo Grove uses both Nunjucks and Markdown to render text</li>
<li>Advanced Markdown usage</li>
</ul>
<h2 id="world--39-s-simplest-puzzle">World&apos;s Simplest Puzzle</h2><p>Here&apos;s a quick demonstration of an if-statement that reads a value from
<code>model.globalState</code>. The template context includes <code>model.globalState</code>
for convenience, so you can check it really easily.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;simple-puzzle&apos;,
  globalState: { hasPulledLever: false },
  situations: [

    { id: &apos;start&apos;,
      optionText: &apos;OK&apos;,
      content: `
      You are standing in a room with a thick shag carpet and purple velvet walls.

      {% if hasPulledLever %}
      The north wall has opened up into a huge cavern.
      {% else %}
      There is a lever on the west wall.
      {% endif %}
      `,
      choices: [&apos;pull-lever&apos;]
    },

    { id: &apos;pull-lever&apos;,
      optionText: &apos;Pull the lever&apos;,
      getCanSee: function(model) { return !model.globalState.hasPulledLever; },
      enter: function(model) {
        model.globalState.hasPulledLever = true;
      },
      content: `
        You pull the lever. A rumbling sound starts beneath your feet.
      `,
      choices: [&apos;start&apos;]
    },

  ]
})</code>
</code></pre>
<p><div id="simple-puzzle" class="jg-headless"></div>

</p>
<h2 id="template-context">Template Context</h2><p>The <em>template context</em> is the set of variables accessible directly
in a template.</p>
<p><code>model</code> and <code>ui</code> are always accessible in the template context,
so this will always work:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">{% if model.globalState.someVar %}some text{% endif %}</code>
</code></pre>
<p>Here&apos;s how the template context is created each time a template is rendered:</p>
<ul>
<li>Add everything from <code>model.globalState</code></li>
<li>Add <code>player</code>, if there is a player <a href="./manual/../class/src/jg/character.js~Character.html">character</a></li>
<li>Add everything you put in <a href="./manual/../class/src/jg/dataui.js~ui.html#instance-method-addTemplateGetters">ui.addTemplateGetters()</a></li>
<li>Add everything you put in <a href="./manual/../class/src/jg/dataui.js~ui.html#instance-method-addTemplateContext">ui.addTemplateContext()</a></li>
<li>Add <code>model</code> and <code>ui</code></li>
</ul>
<h2 id="custom-filters">Custom Filters</h2><p>You can add custom filters to templates using the <code>init</code> hook. This function
is called as soon as Jumbo Grove has parsed your game.</p>
<p>Here&apos;s an example of adding a <code>| yesNo</code> filter to boolean values, so you can
write <code>{{ myVal|yesNo }}</code> to get a &quot;yes&quot; or &quot;no&quot; in your text instead of
&quot;true&quot; or &quot;false&quot;:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;custom-filter-demo&apos;,
  globalState: { isAwesome: true },
  init: function(model, ui) {
    ui.nunjucks.addFilter(&apos;yesNo&apos;, function(val) {
      if (val) { return &quot;yes&quot;; } else { return &quot;no&quot;; }
    });
  },
  situations: [
    {
      id: &apos;start&apos;,
      // Am I awesome? YES!
      content: &quot;Am I awesome? {{ isAwesome|yesNo|upper }}!&quot;
    }
  ]
});</code>
</code></pre>
<p><div id="custom-filter-demo" class="jg-headless"></div>

</p>
<p>For more on Nunjucks filters, <a href="https://mozilla.github.io/nunjucks/api.html#custom-filters">check out the Nunjucks docs.</a></p>
<h2 id="with-markdown--amp--whitespace">With Markdown &amp; Whitespace</h2><p>Any time you write the <code>content</code> for a situation, or the
<code>navHeader</code> or <code>asideHeader</code>, text is processed like this:</p>
<ol>
<li>Remove left indentation</li>
<li>Run Nunjucks</li>
<li>Run MarkdownIt</li>
</ol>
<p>Normally this will have straightforward results. But you have to be
careful not to add indentation when you don&apos;t mean to, because Markdown
treats indented text as a code block if you use four or more spaces:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;whitespace-example-1&apos;,
  situations: [
    {
      id: &apos;start&apos;,
      content: `
      Hello.

      {% if true %}
          This will show up as code!
      {% endif %}

      {% if true %}
      This is a normal paragraph.
      {% endif %}

      {% if true %}
        This only uses 2 spaces and is also a normal paragraph.
      {% endif %}
      `
    }
  ]
});</code>
</code></pre>
<p><div id="whitespace-example-1" class="jg-headless"></div>

</p>
<p>You can &quot;eat&quot; the whitespace before a <code>{%</code> or after a <code>%}</code> by adding a
dash character (<code>{%-</code> / <code>-%}</code>):</p>
<pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;whitespace-example-2&apos;,
  situations: [
    {
      id: &apos;start&apos;,
      content: `
      Hey, my name is
      {% if name == &apos;brad&apos; -%}
        Brad
      {%- else -%}
        Jeff
      {%- endif %}.
      `
    }
  ]
});</code>
</code></pre>
<p><div id="whitespace-example-2" class="jg-headless"></div>

</p>
<h2 id="adding-css">Adding CSS</h2><p>Jumbo Grove makes games for web browsers. It would be a shame if you couldn&apos;t
take advantage of all those great web styling features. Fortunately,
Jumbo Grove includes a MarkdownIt extension called
<a href="https://www.npmjs.com/package/markdown-it-attrs">markdown-it-attrs</a>,
which lets you add CSS classes to things!</p>
<p>You can add additional MarkdownIt extensions in your <code>init</code> callback
using <code>ui.md</code>, a <code>MarkdownIt</code> instance.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">jumbogrove.jumbogrove(&apos;#game&apos;, {
  id: &apos;markdown-it-attrs-demo&apos;,
  situations: [
    {
      id: &apos;start&apos;,
      content: `
      The last word is **pink**{.demo-pink}! Use your browser&apos;s
      inspector tool to look at the CSS on it.
      `
    }
  ]
});</code>
</code></pre>
<p><div id="markdown-it-attrs-demo" class="jg-headless"></div>

</p>
<h2 id="template-comment-syntax">Template Comment Syntax</h2><p>Because Nunjucks&apos;s comment syntax (<code>{# blah blah blah %}</code>) conflicts
with <code>markdown-it-attrs</code>&apos;s HTML ID syntax (<code>{#some-id}</code>), Nunjucks is
configured by default to use <code>{## blah blah blah ##}</code> for comments
(two hashes instead of one on each side).</p>
<h2 id="changing-template-engines">Changing Template Engines</h2><p>It is possible to do this, but it is not in this guide because it
should only be done if you really, really know what you are doing.</p>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.4)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
